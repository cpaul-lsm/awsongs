import{i as w,u as y,e as k,h as b,f as g,q as t}from"./runtime.DAUSjKms.js";import{l as i}from"./render.DzTF58AG.js";import{i as q}from"./proxy.CoxkSrJ3.js";function C(e,f,a=f){var s=w();i(e,"input",c=>{var v=c?e.defaultValue:e.value;if(v=h(e)?m(v):v,a(v),s&&v!==(v=f())){var l=e.selectionStart,o=e.selectionEnd;e.value=v??"",o!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(o,e.value.length))}}),(b&&e.defaultValue!==e.value||y(f)==null&&e.value)&&a(h(e)?m(e.value):e.value),k(()=>{var c=f();h(e)&&c===m(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}const u=new Set;function D(e,f,a,s,c=s){var v=a.getAttribute("type")==="checkbox",l=e;let o=!1;if(f!==null)for(var d of f)l=l[d]??(l[d]=[]);l.push(a),i(a,"change",()=>{var r=a.__value;v&&(r=n(l,r,a.checked)),c(r)},()=>c(v?[]:null)),k(()=>{var r=s();if(b&&a.defaultChecked!==a.checked){o=!0;return}v?(r=r||[],a.checked=r.includes(a.__value)):a.checked=q(a.__value,r)}),g(()=>{var r=l.indexOf(a);r!==-1&&l.splice(r,1)}),u.has(l)||(u.add(l),t(()=>{l.sort((r,_)=>r.compareDocumentPosition(_)===4?-1:1),u.delete(l)})),t(()=>{if(o){var r;if(v)r=n(l,r,a.checked);else{var _=l.find(S=>S.checked);r=_==null?void 0:_.__value}c(r)}})}function n(e,f,a){for(var s=new Set,c=0;c<e.length;c+=1)e[c].checked&&s.add(e[c].__value);return a||s.delete(f),Array.from(s)}function h(e){var f=e.type;return f==="number"||f==="range"}function m(e){return e===""?null:+e}export{D as a,C as b};
